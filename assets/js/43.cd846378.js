(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{352:function(a,t,s){"use strict";s.r(t);var e=s(1),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-基础"}},[a._v("#")]),a._v(" "),t("strong",[a._v("Docker")]),a._v("-基础")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230914184846374.png",alt:"image-20230914184846374"}})]),a._v(" "),t("h2",{attrs:{id:"_1-镜像操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-镜像操作"}},[a._v("#")]),a._v(" 1. 镜像操作")]),a._v(" "),t("h3",{attrs:{id:"_1-1-镜像名称"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-镜像名称"}},[a._v("#")]),a._v(" 1.1 镜像名称")]),a._v(" "),t("p",[a._v("首先来看下镜像的名称组成：")]),a._v(" "),t("ul",[t("li",[a._v("镜名称一般分两部分组成：[repository]:[tag]。")]),a._v(" "),t("li",[a._v("在没有指定tag时，默认是latest，代表最新版本的镜像")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230612154232614.png",alt:"image-20230612154232614"}})]),a._v(" "),t("p",[a._v("这里的mysql就是repository，5.7就是tag，合一起就是镜像名称，代表5.7版本的MySQL镜像。")]),a._v(" "),t("h3",{attrs:{id:"_1-2-镜像命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-镜像命令"}},[a._v("#")]),a._v(" 1.2 镜像命令")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230612154319727.png",alt:"image-20230612154319727"}})]),a._v(" "),t("h3",{attrs:{id:"_1-3-创建nginx镜像案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-创建nginx镜像案例"}},[a._v("#")]),a._v(" 1.3 创建Nginx镜像案例")]),a._v(" "),t("p",[a._v("https://hub.docker.com/ 可以在镜像仓库中搜索，查看官方教程")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("拉取镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看拉取到的镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" images\n")])])])]),a._v(" "),t("li",[t("p",[a._v("导出镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" save "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" nginx.tar nginx:latest\n")])])])]),a._v(" "),t("li",[t("p",[a._v("加载镜像（需要先删除本地镜像）")]),a._v(" "),t("p",[a._v("删除本地镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" rmi nginx:latest\n")])])]),t("p",[a._v("加载本地的镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" load "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" nginx.tar\n")])])]),t("p",[a._v("再次查看镜像，加载成功"),t("code",[a._v("docker images")])])])]),a._v(" "),t("h2",{attrs:{id:"_2-容器操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-容器操作"}},[a._v("#")]),a._v(" 2. 容器操作")]),a._v(" "),t("h3",{attrs:{id:"_2-1-容器相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-容器相关命令"}},[a._v("#")]),a._v(" 2.1 容器相关命令")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230612161502634.png",alt:"image-20230612161502634"}})]),a._v(" "),t("p",[a._v("容器保护三个状态：")]),a._v(" "),t("ul",[t("li",[a._v("运行：进程正常运行")]),a._v(" "),t("li",[a._v("暂停：进程暂停，CPU不再运行，并不释放内存")]),a._v(" "),t("li",[a._v("停止：进程终止，回收进程占用的内存、CPU等资源")])]),a._v(" "),t("p",[a._v("其中：")]),a._v(" "),t("ul",[t("li",[a._v("docker run：创建并运行一个容器，处于运行状态")]),a._v(" "),t("li",[a._v("docker pause：让一个运行的容器暂停")]),a._v(" "),t("li",[a._v("docker unpause：让一个容器从暂停状态恢复运行")]),a._v(" "),t("li",[a._v("docker stop：停止一个运行的容器")]),a._v(" "),t("li",[a._v("docker start：让一个停止的容器再次运行")]),a._v(" "),t("li",[a._v("docker rm：删除一个容器")]),a._v(" "),t("li",[t("code",[a._v("docker inspect xx")]),a._v("查看容器详情")]),a._v(" "),t("li",[t("code",[a._v("docker logs -f xx")]),a._v("查看容器运行日志")])]),a._v(" "),t("h3",{attrs:{id:"_2-2-案例-启动nginx容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-案例-启动nginx容器"}},[a._v("#")]),a._v(" 2.2 案例-启动Nginx容器")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("在上述创建成功基础上，运行容器")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginxContainer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nginx\n")])])]),t("p",[a._v("命令解读：")]),a._v(" "),t("ul",[t("li",[a._v("docker run ：创建并运行一个容器")]),a._v(" "),t("li",[a._v("--name : 给容器起一个名字，比如叫做 "),t("code",[a._v("nginxContainer")])]),a._v(" "),t("li",[a._v("-p ：将宿主机端口与容器端口映射，冒号左侧是宿主机端口，右侧是容器端口")]),a._v(" "),t("li",[a._v("-d：后台运行容器")]),a._v(" "),t("li",[a._v("nginx：镜像名称，例如nginx")])]),a._v(" "),t("p",[a._v("这里的"),t("code",[a._v("-p")]),a._v("参数，是将容器端口映射到宿主机端口。")]),a._v(" "),t("p",[a._v("默认情况下，容器是隔离环境，我们直接访问宿主机的80端口，肯定访问不到容器中的nginx。")]),a._v(" "),t("p",[a._v("现在，将容器的80与宿主机的80关联起来，当我们访问宿主机的80端口时，就会被映射到容器的80，这样就能访问到nginx了：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230612162032232.png",alt:"image-20230612162032232"}})])]),a._v(" "),t("li",[t("p",[a._v("进入容器，修改文件")]),a._v(" "),t("p",[a._v("进入Nginx容器，修改HTML文件内容")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" nginxContainer "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),t("p",[a._v("命令解读：")]),a._v(" "),t("ul",[t("li",[a._v("docker exec ：进入容器内部，执行一个命令")]),a._v(" "),t("li",[a._v("-it : 给当前进入的容器创建一个标准输入、输出终端，允许我们与容器交互")]),a._v(" "),t("li",[a._v("nginxContainer：要进入的容器的名称")]),a._v(" "),t("li",[a._v("bash：进入容器后执行的命令，bash是一个linux终端交互命令")])]),a._v(" "),t("p",[a._v("进入nginx的HTML所在目录 /usr/share/nginx/html（"),t("strong",[a._v("镜像仓库官网可以查询路径")]),a._v("）")]),a._v(" "),t("p",[a._v("容器内部会模拟一个独立的Linux文件系统，看起来如同一个linux服务器一样：")]),a._v(" "),t("p",[a._v("nginx的环境、配置、运行文件全部都在这个文件系统中，包括我们要修改的html文件。")]),a._v(" "),t("p",[a._v("查看DockerHub网站中的nginx页面，可以知道nginx的html目录位置在"),t("code",[a._v("/usr/share/nginx/html")])]),a._v(" "),t("p",[a._v("我们执行命令，进入该目录：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/share/nginx/html\n")])])]),t("p",[a._v("容器内没有vi命令，无法直接修改，我们用下面的命令来修改：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s#Welcome to nginx#你好 bigdata#g'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s#<head>#<head><meta charset=\"utf-8\">#g'")]),a._v(" index.html\n")])])]),t("p",[a._v("在浏览器访问 centos7即可看到结果")])])]),a._v(" "),t("h3",{attrs:{id:"_2-3-案例-运行redis容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-案例-运行redis容器"}},[a._v("#")]),a._v(" 2.3 案例-运行Redis容器")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("拉取镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看拉取的镜像")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker images\n")])])])]),a._v(" "),t("li",[t("p",[a._v("运行Redis容器")]),a._v(" "),t("div",{staticClass:"language-sh' extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run --name redisContainer -p 6379:6379 -d redis redis-server --appendonly yes\n")])])]),t("p",[a._v("命令解读：")]),a._v(" "),t("ul",[t("li",[a._v("docker run ：创建并运行一个容器")]),a._v(" "),t("li",[a._v("--name : 给容器起一个名字，比如叫做 "),t("code",[a._v("redisContainer")])]),a._v(" "),t("li",[a._v("-p ：将宿主机端口与容器端口映射，冒号左侧是宿主机端口，右侧是容器端口")]),a._v(" "),t("li",[a._v("-d：后台运行容器")]),a._v(" "),t("li",[a._v("redis：镜像名称，例如redis")]),a._v(" "),t("li",[a._v("redis-server --appendonly yes 配置单机启动")])])])]),a._v(" "),t("h3",{attrs:{id:"_2-4-小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-小结"}},[a._v("#")]),a._v(" 2.4 小结")]),a._v(" "),t("p",[a._v("docker run命令的常见参数有哪些？")]),a._v(" "),t("ul",[t("li",[a._v("--name：指定容器名称")]),a._v(" "),t("li",[a._v("-p：指定端口映射")]),a._v(" "),t("li",[a._v("-d：让容器后台运行")])]),a._v(" "),t("p",[a._v("查看容器日志的命令：")]),a._v(" "),t("ul",[t("li",[a._v("docker logs")]),a._v(" "),t("li",[a._v("添加 -f 参数可以持续查看日志")])]),a._v(" "),t("p",[a._v("查看容器状态：")]),a._v(" "),t("ul",[t("li",[a._v("docker ps")]),a._v(" "),t("li",[a._v("docker ps -a 查看所有容器，包括已经停止的")])]),a._v(" "),t("h2",{attrs:{id:"_3-数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-数据卷"}},[a._v("#")]),a._v(" 3. 数据卷")]),a._v(" "),t("h3",{attrs:{id:"_3-1-什么是数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-什么是数据卷"}},[a._v("#")]),a._v(" 3.1 什么是数据卷")]),a._v(" "),t("p",[a._v("**数据卷（volume）**是一个虚拟目录，指向宿主机文件系统中的某个目录。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230612165140694.png",alt:"image-20230612165140694"}})]),a._v(" "),t("p",[a._v("一旦完成数据卷挂载，对容器的一切操作都会作用在数据卷对应的宿主机目录了。")]),a._v(" "),t("p",[a._v("这样，我们操作宿主机的/var/lib/docker/volumes/html目录，就等于操作容器内的/usr/share/nginx/html目录了")]),a._v(" "),t("h3",{attrs:{id:"_3-2-数据集操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-数据集操作命令"}},[a._v("#")]),a._v(" 3.2 数据集操作命令")]),a._v(" "),t("p",[a._v("数据卷操作的基本语法如下：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("docker volume命令是数据卷操作，根据命令后跟随的command来确定下一步的操作：")]),a._v(" "),t("ul",[t("li",[a._v("create 创建一个volume")]),a._v(" "),t("li",[a._v("inspect 显示一个或多个volume的信息")]),a._v(" "),t("li",[a._v("ls 列出所有的volume")]),a._v(" "),t("li",[a._v("prune 删除未使用的volume")]),a._v(" "),t("li",[a._v("rm 删除一个或多个指定的volume")])]),a._v(" "),t("h3",{attrs:{id:"_3-3-创建和查看数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-创建和查看数据卷"}},[a._v("#")]),a._v(" 3.3 创建和查看数据卷")]),a._v(" "),t("p",[t("strong",[a._v("需求")]),a._v("：创建一个数据卷，并查看数据卷在宿主机的目录位置")]),a._v(" "),t("p",[a._v("① 创建数据卷")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume create html\n")])])]),t("p",[a._v("② 查看所有数据")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])])]),t("p",[a._v("③ 查看数据卷详细信息卷")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume inspect html\n")])])]),t("p",[a._v("在结果中可以看到，创建的html这个数据卷关联的宿主机目录为"),t("code",[a._v("/var/lib/docker/volumes/html/_data")]),a._v("目录。")]),a._v(" "),t("p",[t("strong",[a._v("小结")]),a._v("：")]),a._v(" "),t("p",[a._v("数据卷的作用：")]),a._v(" "),t("ul",[t("li",[a._v("将容器与数据分离，解耦合，方便操作容器内数据，保证数据安全")])]),a._v(" "),t("p",[a._v("数据卷操作：")]),a._v(" "),t("ul",[t("li",[a._v("docker volume create：创建数据卷")]),a._v(" "),t("li",[a._v("docker volume ls：查看所有数据卷")]),a._v(" "),t("li",[a._v("docker volume inspect：查看数据卷详细信息，包括关联的宿主机目录位置")]),a._v(" "),t("li",[a._v("docker volume rm：删除指定数据卷")]),a._v(" "),t("li",[a._v("docker volume prune：删除所有未使用的数据卷")])]),a._v(" "),t("h3",{attrs:{id:"_3-4-挂载数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-挂载数据卷"}},[a._v("#")]),a._v(" 3.4 挂载数据卷")]),a._v(" "),t("p",[a._v("在创建容器时，可以通过 -v 参数来挂载一个数据卷到某个容器内目录，命令格式如下：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginxContainer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" html:/usr/share/nginx/html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nginx\n")])])]),t("p",[a._v("这里的-v就是挂载数据卷的命令：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("-v html:/usr/share/nginx/html")]),a._v(" ：把html数据卷挂载到容器内的/usr/share/nginx/html这个目录中")])]),a._v(" "),t("h3",{attrs:{id:"_3-5-案例-给nginx挂载数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-案例-给nginx挂载数据卷"}},[a._v("#")]),a._v(" 3.5 案例-给Nginx挂载数据卷")]),a._v(" "),t("p",[t("strong",[a._v("前提")]),a._v("：创建容器，创建数据卷html，查看数据卷详细信息卷")]),a._v(" "),t("p",[a._v("① 创建容器并挂载数据卷到容器内的HTML目录")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginxContainer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" html:/usr/share/nginx/html "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nginx\n")])])]),t("p",[a._v("② 进入html数据卷所在位置，并修改HTML内容")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看html数据卷的位置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume inspect html\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入该目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /var/lib/docker/volumes/html/_data\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" index.html\n")])])]),t("h3",{attrs:{id:"_3-6-案例-给mysql挂载本地目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-案例-给mysql挂载本地目录"}},[a._v("#")]),a._v(" 3.6 案例-给MySQL挂载本地目录")]),a._v(" "),t("p",[a._v("容器不仅仅可以挂载数据卷，也可以直接挂载到宿主机目录上。关联关系如下：")]),a._v(" "),t("ul",[t("li",[a._v("带数据卷模式：宿主机目录 --\x3e 数据卷 ---\x3e 容器内目录")]),a._v(" "),t("li",[a._v("直接挂载模式：宿主机目录 ---\x3e 容器内目录")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230613133819066.png",alt:"image-20230613133819066"}})]),a._v(" "),t("p",[t("strong",[a._v("语法")]),a._v("：")]),a._v(" "),t("p",[a._v("目录挂载与数据卷挂载的语法是类似的：")]),a._v(" "),t("ul",[t("li",[a._v("-v [宿主机目录]:[容器内目录]")]),a._v(" "),t("li",[a._v("-v [宿主机文件]:[容器内文件]")])]),a._v(" "),t("p",[t("strong",[a._v("创建并运行一个MySQL容器，将宿主机目录直接挂载到容器")])]),a._v(" "),t("p",[a._v("**需求：**创建并运行一个MySQL容器，将宿主机目录直接挂载到容器")]),a._v(" "),t("ul",[t("li",[t("p",[t("strong",[a._v("前提")]),a._v("：创建MySQL容器")])]),a._v(" "),t("li",[t("p",[a._v("在宿舍机创建目录/tmp/mysql/data")])]),a._v(" "),t("li",[t("p",[a._v("在宿舍机创建目录/tmp/mysql/conf，")]),a._v(" "),t("p",[a._v("conf目录下创建hmy.cnf文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nskip-name-resolve\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("character_set_server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("datadir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/mysql\nserver-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("① 挂载/tmp/mysql/data到mysql容器内数据存储目录")]),a._v(" "),t("p",[a._v("② 挂载/tmp/mysql/conf/hmy.cnf到mysql容器的配置文件")]),a._v(" "),t("p",[a._v("③ 设置MySQL密码")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mysqlContainer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3307")]),a._v(":3307 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#默认3306端口号，修改端口号后需要在hmy.cnf中添加端口号信息")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /tmp/mysql/data:/var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nmysql:5.7.25\n")])])]),t("p",[a._v("在hmy.cnf中添加端口号信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nskip-name-resolve\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("character_set_server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("datadir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/mysql\nserver-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3307")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("MySQL容器启动成功")])])]),a._v(" "),t("h3",{attrs:{id:"_3-7-小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-小结"}},[a._v("#")]),a._v(" 3.7 小结")]),a._v(" "),t("p",[a._v("docker run的命令中通过 -v 参数挂载文件或目录到容器中：")]),a._v(" "),t("ul",[t("li",[a._v("-v volume名称:容器内目录")]),a._v(" "),t("li",[a._v("-v 宿主机文件:容器内文")]),a._v(" "),t("li",[a._v("-v 宿主机目录:容器内目录")])]),a._v(" "),t("p",[a._v("数据卷挂载与目录直接挂载的")]),a._v(" "),t("ul",[t("li",[a._v("数据卷挂载耦合度低，由docker来管理目录，但是目录较深，不好找")]),a._v(" "),t("li",[a._v("目录挂载耦合度高，需要我们自己管理目录，不过目录容易寻找查看")])]),a._v(" "),t("h2",{attrs:{id:"_4-自定义镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-自定义镜像"}},[a._v("#")]),a._v(" 4.自定义镜像")]),a._v(" "),t("p",[a._v("常见的镜像在DockerHub就能找到，但是我们自己写的项目就必须自己构建镜像了。")]),a._v(" "),t("p",[a._v("镜像就是包含了应用程序、程序运行的系统函数库、运行配置等文件的文件包。构建镜像的过程其实就是把上述文件按照顺序逐层打包。")]),a._v(" "),t("h3",{attrs:{id:"_4-1-镜像结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-镜像结构"}},[a._v("#")]),a._v(" 4.1 镜像结构")]),a._v(" "),t("p",[a._v("镜像是将应用程序及其需要的系统函数库、环境、配置、依赖打包而成。")]),a._v(" "),t("p",[a._v("我们以MySQL为例，来看看镜像的组成结构：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230915221849440.png",alt:"image-20230915221849440"}})]),a._v(" "),t("p",[a._v("简单来说，镜像就是在系统函数库、运行环境基础上，添加应用程序文件、配置文件、依赖文件等组合，然后编写好启动脚本打包在一起形成的文件。")]),a._v(" "),t("p",[a._v("我们要构建镜像，其实就是实现上述打包的过程。")]),a._v(" "),t("h3",{attrs:{id:"_4-2-dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-dockerfile"}},[a._v("#")]),a._v(" 4.2 Dockerfile")]),a._v(" "),t("p",[a._v("构建自定义的镜像时，并不需要一个个文件去拷贝，打包。")]),a._v(" "),t("p",[a._v("我们只需要告诉Docker，我们的镜像的组成，需要哪些BaseImage、需要拷贝什么文件、需要安装什么依赖、启动脚本是什么，将来Docker会帮助我们构建镜像。")]),a._v(" "),t("p",[a._v("而描述上述信息的文件就是Dockerfile文件。")]),a._v(" "),t("p",[t("strong",[a._v("Dockerfile")]),a._v("就是一个文本文件，其中包含一个个的"),t("strong",[a._v("指令(Instruction)")]),a._v("，用指令来说明要执行什么操作来构建镜像。每一个指令都会形成一层Layer。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230915222020632.png",alt:"image-20230915222020632"}})]),a._v(" "),t("p",[a._v("更新详细语法说明，请参考官网文档： https://docs.docker.com/engine/reference/builder")]),a._v(" "),t("h3",{attrs:{id:"_4-3-构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-构建镜像"}},[a._v("#")]),a._v(" 4.3 构建镜像")]),a._v(" "),t("p",[a._v("我们可以基于Ubuntu基础影响，利用Dockerfile描述镜像结构，也可以直接基于JDK为基础镜像，省略前面的步骤：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230915222201780.png",alt:"image-20230915222201780"}})]),a._v(" "),t("p",[a._v("当编写好了Dockerfile，可以利用下面命令来构建镜像：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" myImage:1.0 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("ul",[t("li",[t("p",[t("strong",[t("code",[a._v("-t")])]),a._v(" ：是给镜像起名，格式依然是repository:tag的格式，不指定tag时，默认为latest")])]),a._v(" "),t("li",[t("p",[t("strong",[t("code",[a._v(".")])]),a._v(' ：是指定Dockerfile所在目录，如果就在当前目录，则指定为"."')])])]),a._v(" "),t("h4",{attrs:{id:"构建java项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建java项目"}},[a._v("#")]),a._v(" 构建Java项目")]),a._v(" "),t("p",[a._v("需求：基于openjdk:11.0-jre-buster镜像，将一个Java项目构建为镜像")]),a._v(" "),t("p",[a._v("实现思路如下：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("① 新建一个空的目录，然后在目录中新建一个文件，命名为Dockerfile")])]),a._v(" "),t("li",[t("p",[a._v("② 拷贝课前资料提供的docker-demo.jar到这个目录中")])]),a._v(" "),t("li",[t("p",[a._v("③ 编写Dockerfile文件：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("a ）基于openjdk:11.0-jre-buster作为基础镜像")])]),a._v(" "),t("li",[t("p",[a._v("b ）将app.jar拷贝到镜像中")])]),a._v(" "),t("li",[t("p",[a._v("c ）暴露端口")])]),a._v(" "),t("li",[t("p",[a._v("d ）编写入口ENTRYPOINT")]),a._v(" "),t("p",[a._v("内容如下：")]),a._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 基础镜像")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" openjdk:11.0-jre-buster")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设定时区")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENV")]),a._v(" TZ=Asia/Shanghai")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("RUN")]),a._v(" ln -snf /usr/share/zoneinfo/"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TZ")]),a._v(" /etc/localtime && echo "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TZ")]),a._v(" > /etc/timezone")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拷贝jar包")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COPY")]),a._v(" docker-demo.jar /app.jar")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 入口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENTRYPOINT")]),a._v(" ["),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"java"')]),a._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-jar"')]),a._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/app.jar"')]),a._v("]")]),a._v("\n")])])])])])]),a._v(" "),t("li",[t("p",[a._v("④ 使用docker build命令构建镜像")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" docker-demo "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("可以不指定版本号")])]),a._v(" "),t("li",[t("p",[a._v("⑤ 使用docker run创建容器并运行")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" docker-demo "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8090")]),a._v(":8090 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" docker-demo\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://192.168.137.60:8090/hello/count\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"_5-网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-网络"}},[a._v("#")]),a._v(" 5.网络")]),a._v(" "),t("p",[a._v("默认情况下，所有容器都是以bridge方式连接到Docker的一个虚拟网桥上：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/tjlxy/img/raw/master/image-20230916220307968.png",alt:"image-20230916220307968"}})]),a._v(" "),t("p",[a._v("加入自定义网络的容器才可以通过容器名互相访问，Docker的网络操作命令如下")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("命令")]),a._v(" "),t("th",[a._v("说明")]),a._v(" "),t("th",[a._v("文档地址")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("docker network create")]),a._v(" "),t("td",[a._v("创建一个网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_create/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network create"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network ls")]),a._v(" "),t("td",[a._v("查看所有网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_ls/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network ls"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network rm")]),a._v(" "),t("td",[a._v("删除指定网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_rm/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network rm"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network prune")]),a._v(" "),t("td",[a._v("清除未使用的网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_prune/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network prune"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network connect")]),a._v(" "),t("td",[a._v("使指定容器连接加入某网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_connect/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network connect"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network disconnect")]),a._v(" "),t("td",[a._v("使指定容器连接离开某网络")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_disconnect/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network disconnect"),t("OutboundLink")],1)])]),a._v(" "),t("tr",[t("td",[a._v("docker network inspect")]),a._v(" "),t("td",[a._v("查看网络详细信息")]),a._v(" "),t("td",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/network_inspect/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker   network inspect"),t("OutboundLink")],1)])])])]),a._v(" "),t("p",[a._v("运行容器时指定网络")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" 自定义网络名\n")])])]),t("h2",{attrs:{id:"常用软件部署示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用软件部署示例"}},[a._v("#")]),a._v(" 常用软件部署示例")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("--Redis--\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" redisContainer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" redis redis-server "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--appendonly")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yes")]),a._v("\n\n\n--Nginx--\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginxContainer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nginx\n--MySQL--\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" load "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" mysql.tar\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mysqlContainer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3307")]),a._v(":3307 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /tmp/mysql/data:/var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nmysql:5.7.25\n\n需要改 conf 中文件\n添加port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3307")]),a._v("\n-----------\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull rabbitmq:3-management\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("admin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("RABBITMQ_DEFAULT_PASS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" rabbitmqContainer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" rabbitmq "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15672")]),a._v(":15672 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5672")]),a._v(":5672 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n rabbitmq:3-management\n----------\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" load "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" xxx.tar\n\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" es "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ES_JAVA_OPTS=-Xms512m -Xmx512m"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"discovery.type=single-node"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" es-data:/usr/share/elasticsearch/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" es-plugins:/usr/share/elasticsearch/plugins "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" es-net "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9200")]),a._v(":9200 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9300")]),a._v(":9300 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nelasticsearch:7.12.1\n\nhttp://192.168.137.60:9200/\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" kibana "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ELASTICSEARCH_HOSTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://es:9200 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("es-net "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5601")]),a._v(":5601  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nkibana:7.12.1\n\nhttp://192.168.137.60:5601/app/home"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#/")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);