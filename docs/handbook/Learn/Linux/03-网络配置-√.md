# 网络配置

## 1. 查看网络IP和网关

这里是NAT模式，NAT模式是一种网络连接方式，其中路由器或网络设备充当中介，将私有IP地址转换为公共IP地址，以实现本地设备与互联网之间的通信。在NAT模式下，路由器分配给每个设备一个内部IP地址，并使用单个外部IP地址与互联网通信。这样可以有效地减少公共IP地址的需求，提高网络安全性，并在一定程度上隐藏内部网络结构。

虚拟机与主机共享路由器，可以看做平等关系

1、查看虚拟网络编辑器

2、修改虚拟网卡 Ip

- VMnet8改为NAT模式，修改子网地址192.16.137.0，子网掩码255.255.255.0

![image-20231209175657058](https://gitee.com/tjlxy/img/raw/master/image-20231209175657058.png)

- 查看网关，192.168.137.2

![image-20231209175858886](https://gitee.com/tjlxy/img/raw/master/image-20231209175858886.png)

- 查看 windows 环境的中 VMnet8 网络配置，IP4地址192.168.137.1（主机），主机需要与虚拟机处于同一网关下

![image-20231209180215414](https://gitee.com/tjlxy/img/raw/master/image-20231209180215414.png)



## 2. 配置网络IP地址

### 2.1 ifconfig 配置网络接口

ifconfig :全名network interfaces configuring 网络接口配置

`ifconfig `（功能描述：显示所有网络接口的配置信息）

### 2.2 ping 测试主机之间网络连通性

ping 目的主机 （功能描述：测试当前服务器是否可以连接目的主机）

测试当前服务器是否可以连接百度

`ping www.baidu.com`

### 2.3 修改IP地址

root用户下

`vi /etc/sysconfig/network-scripts/ifcfg-ens33`

4、15、16、18、19行必须修改

```shell
TYPE=Ethernet #网络类型（通常是 Ethemet）
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static #IP 的配置方法[none|static|bootp|dhcp]（引导时不使用协议|静态分配 IP|BOOTP 协议|DHCP 协议）
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=9a13aa3a-9b23-4bd5-a87c-83816b5e3f5e #随机ID
DEVICE=ens33	#网络类型（通常是 Ethemet
ONBOOT=yes #系统启动的时候网络接口是否有效（yes/no）
IPADDR=192.168.137.50 #IP地址
NETMASK=255.255.255.0 #子网掩码
GATEWAY=192.168.137.2 #网关
DNS1=192.168.137.2 #域名解析器
```

编辑完后，按键盘 esc ，然后输入 :wq 回车即可

执行 `service network restart` 或`systemctl restart network`重启网络



### 2.4 修改IP地址可能会遇到的问题

（1）物理机能 ping 通虚拟机，但是虚拟机，ping 不通物理机，一般都是因为物理机的防火墙问题，把防火墙关闭就行 

（2）虚拟机能 Ping 通物理机，但是虚拟机 Ping 不通外网，一般都是因为DNS 的设置有问题 

（3）虚拟机 Ping www.baidu.com 显示域名未知等信息，一般查看GATEWAY 和DNS 设置是否正确 

（4）如果以上全部设置完还是不行，需要关闭 NetworkManager 服务

- systemctl stop NetworkManager 关闭 
- systemctl disable NetworkManager 禁用 

（5）如果检查发现 systemctl status network 有问题 需要检查ifcfg-ens33

## 3. 配置主机名

`hostname` （功能描述：查看当前服务器的主机名称）

### 3.1 修改主机名

vi /etc/hostname`

修改完成后重启生效。

### 3.2 修改 hosts 映射文件

1、修改 linux 的主机映射文件（hosts 文件）

`vi /etc/hosts`

```
192.168.137.50 centos7
...
```

重启设备，重启后，查看主机名，已经修改成功

2、修改 windows 的主机映射文件（hosts 文件）

进入C:\Windows\System32\drivers\etc 路径

打开 hosts 文件并添加如下内容

```
192.168.137.50 centos7
...
```

## 4. 远程登录

使用Windows终端

ssh 用户@主机名

ssh root@centos7

也可以使用远程连接工具，功能更加强大，比较主流的有 Xshell，SecureCRT，FinalShell ，MobaXterm等

