## RabbitMQ-简介及安装

### 1. 简介

- RabbitMQ是一个消息代理：一个消息系统的媒介。它可以为你的应用提供一个通用的消息发送和接收平台，并且保证消息在传输过程中的安全。

- 它接受并转发消息。你可以把它当做一个快递站点，当你要发送一个包裹时，你把你的包裹放到快递站，快递员最终会把你的快递送到收件人那里，按照这种逻辑 RabbitMQ 是一个快递站，一个快递员帮你传递快件。RabbitMQ 与快递站的主要区别在于，它不处理快件而是接收，存储和转发消息数据。

### 2.安装

1. [官网地址](https://www.rabbitmq.com/download.html)

2. 准备文件
    
    - `erlang-21.3-1.el7.x86_64.rpm`
    - `rabbitmq-server-3.8.8-1.el7.noarch.rpm`
    
3. 安装（按照一下顺序）

    ```shell script
    rpm -ivh erlang-21.3-1.el7.x86_64.rpm
    yum install socat -y
    rpm -ivh rabbitmq-server-3.8.8-1.el7.noarch.rpm
    ```

4. 常用命令(按照以下顺序执行)
    
    - 添加开机启动 RabbitMQ 服务
    
        - `chkconfig rabbitmq-server on`
    - 启动服务
        - `/sbin/service rabbitmq-server start `
        
    - 查看服务状态
        - `/sbin/service rabbitmq-server status`
        
    - 停止服务(选择执行)
        - `/sbin/service rabbitmq-server stop` 
        
    - 开启 web 管理插件
        - `rabbitmq-plugins enable rabbitmq_management`
        
    - 用默认账号密码(guest)访问地址 
        - http://192.168.137.50:15672/ 出现权限问题
        
5. 添加一个新的用户

    - 创建账号
        - `rabbitmqctl add_user admin 123`
        
    - 设置用户角色
        - `rabbitmqctl set_user_tags admin administrator`
        
    - 设置用户权限
        - `set_permissions [-p <vhostpath>] <user> <conf> <write> <read>`
        - `rabbitmqctl set_permissions -p "/" admin ".*" ".*" ".*"`
        - 用户 user_admin 具有/vhost1 这个 virtual host 中所有资源的配置、写、读权限
    
    - 当前用户和角色
        - `rabbitmqctl list_users`
        
6. 再次利用 admin 用户登录

7. 重置命令
    - 关闭应用的命令为
        - `rabbitmqctl stop_app`
        
    - 清除的命令为
        - `rabbitmqctl reset`
        
    - 重新启动命令为
        `rabbitmqctl start_app`